generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique 
  nickname  String          
  image     String?         
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tasks Task[]
  goals Goal[]
}


model Task {
  id        String   @id @default(uuid())
  title     String
  description String?
  memo String?
  priority Priority
  repeatDays RepeatDay[]
  startDate String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  isDone Boolean @default(false)
  goalId String?
  userId String
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  goal Goal? @relation(fields: [goalId], references: [id], onDelete: SetNull)
}

model Goal {
  id String @id @default(uuid())
  name String
  tasks Task[]
  userId String
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

enum Priority {
  낮음
  보통
  중요
}

enum RepeatDay {
  월
  화
  수
  목
  금
  토
  일
}
